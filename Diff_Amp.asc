Version 4
SHEET 1 1484 1016
WIRE 672 -304 592 -304
WIRE 736 -304 672 -304
WIRE 880 -304 816 -304
WIRE 960 -304 880 -304
WIRE 592 -256 592 -304
WIRE 224 -224 208 -224
WIRE 352 -224 304 -224
WIRE 64 -144 0 -144
WIRE 208 -144 208 -224
WIRE 208 -144 144 -144
WIRE 256 -128 256 -144
WIRE 592 -128 592 -176
WIRE 208 -112 208 -144
WIRE 224 -112 208 -112
WIRE 352 -96 352 -224
WIRE 352 -96 288 -96
WIRE 400 -96 352 -96
WIRE 224 -80 208 -80
WIRE 848 -80 832 -80
WIRE 976 -80 928 -80
WIRE 64 -32 0 -32
WIRE 208 -32 208 -80
WIRE 208 -32 144 -32
WIRE 256 -32 256 -64
WIRE 688 0 624 0
WIRE 832 0 832 -80
WIRE 832 0 768 0
WIRE 208 16 208 -32
WIRE 880 16 880 0
WIRE -384 32 -384 -16
WIRE 832 32 832 0
WIRE 848 32 832 32
WIRE 976 48 976 -80
WIRE 976 48 912 48
WIRE 1024 48 976 48
WIRE 848 64 832 64
WIRE 688 112 624 112
WIRE 832 112 832 64
WIRE 832 112 768 112
WIRE 880 112 880 80
WIRE -384 128 -384 96
WIRE 208 128 208 96
WIRE -384 144 -384 128
WIRE 832 160 832 112
WIRE 224 192 208 192
WIRE 352 192 304 192
WIRE -384 240 -384 208
WIRE -384 256 -384 240
WIRE 64 272 0 272
WIRE 208 272 208 192
WIRE 208 272 144 272
WIRE 832 272 832 240
WIRE 256 288 256 272
WIRE 208 304 208 272
WIRE 224 304 208 304
WIRE 352 320 352 192
WIRE 352 320 288 320
WIRE 400 320 352 320
WIRE 224 336 208 336
WIRE -384 368 -384 320
WIRE 64 384 0 384
WIRE 208 384 208 336
WIRE 208 384 144 384
WIRE 256 384 256 352
WIRE 208 432 208 384
WIRE 208 544 208 512
WIRE 224 624 208 624
WIRE 352 624 304 624
WIRE -400 688 -400 656
WIRE 64 704 0 704
WIRE 208 704 208 624
WIRE 208 704 144 704
WIRE 256 720 256 704
WIRE 208 736 208 704
WIRE 224 736 208 736
WIRE 352 752 352 624
WIRE 352 752 288 752
WIRE 400 752 352 752
WIRE 224 768 208 768
WIRE -400 816 -400 768
WIRE 64 816 0 816
WIRE 208 816 208 768
WIRE 208 816 144 816
WIRE 256 832 256 784
WIRE 208 864 208 816
WIRE 208 976 208 944
FLAG 208 128 0
FLAG 208 544 0
FLAG 208 976 0
FLAG -384 368 0
FLAG -400 816 0
FLAG 256 -32 0
FLAG 256 384 0
FLAG -400 656 Vcc
FLAG 256 -144 Vcc
FLAG 256 272 Vcc
FLAG 256 704 Vcc
FLAG 256 832 0
FLAG 400 -96 V3
IOPIN 400 -96 Out
FLAG 400 320 V2
IOPIN 400 320 Out
FLAG 400 752 V1
IOPIN 400 752 Out
FLAG -384 -16 Vb_3
FLAG -384 240 Vb_1
FLAG -384 128 Vb_2
FLAG 0 -32 Vb_3
FLAG 0 -144 Vb_2
FLAG 0 384 Vb_2
FLAG 0 272 Vb_1
FLAG 0 816 Vb_1
FLAG 0 704 0
FLAG 592 -128 0
FLAG 960 -304 0
FLAG 672 -304 VR1
FLAG 880 -304 VR2
FLAG 832 272 0
FLAG 880 112 0
FLAG 880 0 Vcc
FLAG 1024 48 V_shunt
IOPIN 1024 48 Out
FLAG 624 112 VR1
FLAG 624 0 VR2
SYMBOL Misc\\cell -384 32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {V_cell}
SYMBOL res 160 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL res 320 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {R}
SYMBOL res 224 112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value {R}
SYMBOL res 160 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {R}
SYMBOL Misc\\cell -384 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {V_cell}
SYMBOL res 160 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R}
SYMBOL res 320 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL res 224 528 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value {R}
SYMBOL res 160 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R}
SYMBOL Misc\\cell -384 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {V_cell}
SYMBOL res 160 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {R}
SYMBOL res 320 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R}
SYMBOL res 224 960 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value {R}
SYMBOL res 160 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {R}
SYMBOL voltage -400 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL ZZZ\\OpAmp\\LM324 256 -96 R0
SYMATTR InstName U1
SYMBOL ZZZ\\OpAmp\\LM324 256 320 R0
SYMATTR InstName U2
SYMBOL ZZZ\\OpAmp\\LM324 256 752 R0
SYMATTR InstName U3
SYMBOL voltage 592 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 5
SYMBOL res 832 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {R_shunt}
SYMBOL res 784 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {R}
SYMBOL res 944 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value {R}
SYMBOL res 848 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value {R}
SYMBOL res 784 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value {R}
SYMBOL ZZZ\\OpAmp\\LM324 880 48 R0
SYMATTR InstName U4
TEXT -520 472 Left 2 !.param R =  100
TEXT -520 504 Left 2 !.param V_cell = 3.6
TEXT -434 1000 Left 2 !.tran 100m
TEXT -520 536 Left 2 !.param R_shunt = 0.5
TEXT 920 176 Left 2 ;Current = (VR1-VR2)/R_shunt
